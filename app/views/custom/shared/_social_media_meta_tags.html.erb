<% og_description = local_assigns[:social_description] || setting["meta_description"] || "Citizen participation tool for an open, transparent and democratic government" %>
<% og_description = truncate(ActionView::Base.full_sanitizer.sanitize(og_description), length: 140) %>

<!-- Twitter -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="<%= setting["twitter_handle"] %>" />
<meta name="twitter:url" content="<%= setting["url"] %>" />
<meta name="twitter:text:title" content="<%= local_assigns[:social_title] || setting["meta_title"] %>" />
<meta name="twitter:description" content="<%= og_description %>" />
<meta name="twitter:image" content="<%= local_assigns[:twitter_image_url] || @social_media_icon_twitter_url || "social_media_icon_twitter.png" %>" />

<!-- Facebook OG -->
<meta property="og:title" content="<%= local_assigns[:social_title] || setting["meta_title"] %>" id="ogtitle" />
<meta property="og:image" content="<%= root_url + (local_assigns[:og_image_url] || @social_media_icon_path || "social_media_icon.png" ) %>" id="ogimage" />
<meta property="og:description" content="<%= og_description %>" id="ogdescription" />
<meta property="og:url" content="<%= local_assigns[:social_url] || request.original_url %>" id="ogurl" />

<meta property="og:type" content="article" />
<meta property="og:site_name" content="<%= setting["org_name"] %>" />
<meta property="fb:app_id" content="<%= Rails.application.secrets.facebook_key %>" />
<% if setting["url"] %>
  <meta property="article:publisher" content="<%= setting["url"] %>" />
<% end %>
<% if setting["facebook_handle"] %>
  <meta property="article:author" content="https://www.facebook.com/<%= setting["facebook_handle"] %>" />
<% end %>
