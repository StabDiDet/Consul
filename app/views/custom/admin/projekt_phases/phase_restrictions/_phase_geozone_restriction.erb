<div class="phase-geo-restriction">
  <strong class='geo-restriction-title'>
    <span class='geo-restriction-icon'><%= t("custom.admin.projekts.edit.projekt_phases_tab.restriction") %></span>
    <span class='restriction-hint'><%= t("custom.projekt_phases.restrictions.hint") %></span>
  </strong>
  <div class="projekt-phase-restriction-selector margin-bottom <%= 'gray-labels' if skip_user_verification? %>">

    <%= f.radio_button :geozone_restricted, 'no_restriction',
                       label: t('custom.geozones.sidebar_filter.restrictions.no_restriction' ),
                       checked: ( projekt_phase.geozone_restricted.blank? || projekt_phase.geozone_restricted == 'no_restriction' ),
                       disabled: skip_user_verification? %>
    <br>

    <%= f.radio_button :geozone_restricted, 'only_citizens', label: t('custom.geozones.sidebar_filter.restrictions.only_citizens'),  disabled: skip_user_verification? %>
    <br>

    <%= f.radio_button :geozone_restricted, 'only_geozones', label: t('custom.geozones.sidebar_filter.restrictions.only_geozones'), class: "#{projekt_phase.name}_only_geozones", disabled: skip_user_verification? %>

    <div class="projekt-phase-geozone-selector <%= projekt_phase.name %>">
      <%= f.collection_check_boxes(:geozone_restriction_ids, Geozone.all, :id, :name, {}, { disabled: skip_user_verification? } ) do |b| %>
        <%= b.label(style: 'display:inline-block;cursor:pointer;') { b.check_box(style: 'margin-top:0;') + b.text } %>
      <% end %>
    </div>
    <br>

    <%= f.radio_button :geozone_restricted, 'only_streets', label: t('custom.geozones.sidebar_filter.restrictions.only_streets'), class: "#{projekt_phase.name}_only_streets", disabled: skip_user_verification? %>

    <div class="projekt-phase-street-selector">
      <div id="projekt-phase-selected-streets">
        <% projekt_phase.city_streets.each do |street| %>
          <div class='selected-street' data-street-id=<%= street.id %>>
            <%= street.name_with_plz %>
            <i class='fas fa-times js-deselect-street'></i>
          </div>
        <% end %>
      </div>

      <%= select_tag :streets, options_from_collection_for_select(CityStreet.all, :id, :name_with_plz), class: 'js-select-street', prompt: 'Bitte wÃ¤hlen' %>

      <div class='hide'>
        <%= f.collection_check_boxes :city_street_ids, CityStreet.all, :id, :name %>
      </div>
    </div>

  </div>
</div>
