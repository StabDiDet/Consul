<div id="admin-map" class="map"
                    data-map
                    data-map-center-latitude="<%= map_location.latitude %>"
                    data-map-center-longitude="<%= map_location.longitude %>"
                    data-map-zoom="<%= map_location.zoom %>"
                    data-map-layers="<%= mappable.map_layers_for_render.to_json %>"

                    data-admin-editor="true"
                    data-enable-geoman-controls="true"

                    data-show-admin-shape="<%= map_location.show_admin_shape? %>"
                    data-admin-shape="<%= map_location.shape.presence&.to_json || map_location.json_data.to_json %>"

                    data-editable="true"
                    data-latitude-input-selector="#latitude"
                    data-longitude-input-selector="#longitude"
                    data-zoom-input-selector="#zoom"
                    data-shape-input-selector="#shape"
                    data-show-admin-shape-input-selector="#show_admin_shape"

                    data-map-tiles-provider="<%= Rails.application.secrets.map_tiles_provider %>"
                    data-map-tiles-provider-attribution="<%= Rails.application.secrets.map_tiles_provider_attribution %>"
                    data-marker-latitude="<%= map_location.latitude %>"
                    data-marker-longitude="<%= map_location.longitude %>"
                    data-marker-color="<%#= map_location.projekt.color %>"
                    data-marker-fa-icon-class="<%#= map_location.projekt.icon %>"
                    >
</div>

<%= form_tag namespace_mappable_path(action: :update_map), method: :patch, id: "map-form" do |f| %>

  <%= hidden_field_tag :latitude, map_location.latitude %>
  <%= hidden_field_tag :longitude, map_location.longitude %>
  <%= hidden_field_tag :zoom, map_location.zoom %>
  <%= hidden_field_tag :shape, JSON.generate(map_location.shape) %>
  <%= hidden_field_tag :show_admin_shape, map_location.show_admin_shape %>

  <div class="small-12 medium-6 large-4 margin-top">
    <%= submit_tag t("admin.settings.index.map.form.submit"),
                 class: "button hollow expanded" %>
  </div>

<% end %>
